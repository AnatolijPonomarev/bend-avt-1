"use strict";(self.webpackChunkticketSales2022=self.webpackChunkticketSales2022||[]).push([[911],{2911:(D,f,a)=>{a.r(f),a.d(f,{AuthModule:()=>R});var l=a(6895),d=a(9965),e=a(8256),h=a(8783),p=a(805),b=a(2453),_=a(9069),v=a(6256),M=a(4758),g=a(1740),r=a(4006),T=a(982);const y=["cb"],x=function(o,u,n){return{"p-checkbox-label":!0,"p-checkbox-label-active":o,"p-disabled":u,"p-checkbox-label-focus":n}};function A(o,u){if(1&o){const n=e.EpF();e.TgZ(0,"label",7),e.NdJ("click",function(i){e.CHM(n);const s=e.oxw(),c=e.MAs(3);return e.KtG(s.onClick(i,c,!0))}),e._uU(1),e.qZA()}if(2&o){const n=e.oxw();e.Tol(n.labelStyleClass),e.Q6J("ngClass",e.kEZ(5,x,n.checked(),n.disabled,n.focused)),e.uIk("for",n.inputId),e.xp6(1),e.Oqu(n.label)}}const Z=function(o,u,n){return{"p-checkbox p-component":!0,"p-checkbox-checked":o,"p-checkbox-disabled":u,"p-checkbox-focused":n}},w=function(o,u,n){return{"p-highlight":o,"p-disabled":u,"p-focus":n}},J={provide:r.JU,useExisting:(0,e.Gpc)(()=>m),multi:!0};let m=(()=>{class o{constructor(n){this.cd=n,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new e.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(n,t,i){n.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(n),i&&t.focus())}updateModel(n){let t;this.binary?(t=this.checked()?this.falseValue:this.trueValue,this.model=t,this.onModelChange(t)):(t=this.checked()?this.model.filter(i=>!T.gb.equals(i,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(t),this.model=t,this.formControl&&this.formControl.setValue(t)),this.onChange.emit({checked:t,originalEvent:n})}handleChange(n){this.readonly||this.updateModel(n)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(n){this.model=n,this.cd.markForCheck()}registerOnChange(n){this.onModelChange=n}registerOnTouched(n){this.onModelTouched=n}setDisabledState(n){this.disabled=n,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:T.gb.contains(this.value,this.model)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["p-checkbox"]],viewQuery:function(n,t){if(1&n&&e.Gf(y,5),2&n){let i;e.iGM(i=e.CRH())&&(t.inputViewChild=i.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[e._Bn([J])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),e.NdJ("focus",function(){return t.onFocus()})("blur",function(){return t.onBlur()})("change",function(c){return t.handleChange(c)}),e.qZA()(),e.TgZ(4,"div",4),e.NdJ("click",function(c){e.CHM(i);const B=e.MAs(3);return e.KtG(t.onClick(c,B,!0))}),e._UZ(5,"span",5),e.qZA()(),e.YNc(6,A,2,9,"label",6)}2&n&&(e.Tol(t.styleClass),e.Q6J("ngStyle",t.style)("ngClass",e.kEZ(18,Z,t.checked(),t.disabled,t.focused)),e.xp6(2),e.Q6J("readonly",t.readonly)("value",t.value)("checked",t.checked())("disabled",t.disabled),e.uIk("id",t.inputId)("name",t.name)("tabindex",t.tabindex)("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("aria-checked",t.checked())("required",t.required),e.xp6(2),e.Q6J("ngClass",e.kEZ(22,w,t.checked(),t.disabled,t.focused)),e.xp6(1),e.Q6J("ngClass",t.checked()?t.checkboxIcon:null),e.xp6(1),e.Q6J("ngIf",t.label))},dependencies:[l.mk,l.O5,l.PC],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),o})(),S=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez]}),o})();function N(o,u){if(1&o){const n=e.EpF();e.TgZ(0,"div",11)(1,"span"),e._uU(2,"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b"),e.qZA(),e.TgZ(3,"input",12),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw(2);return e.KtG(s.cardNumber=i)}),e.qZA()()}if(2&o){const n=e.oxw(2);e.xp6(3),e.Q6J("ngModel",n.cardNumber)}}function I(o,u){if(1&o){const n=e.EpF();e.TgZ(0,"div",8),e._uU(1," \u043d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b "),e.TgZ(2,"p-checkbox",9),e.NdJ("onChange",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.vipStatusSelected())})("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.selectedValue=i)}),e.qZA(),e.TgZ(3,"div"),e.YNc(4,N,4,1,"div",10),e.qZA()()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("binary",!0)("ngModel",n.selectedValue),e.xp6(2),e.Q6J("ngIf",n.selectedValue)}}const k=function(o){return{"input-error":o}};let U=(()=>{class o{constructor(n,t,i,s,c){this.messageService=n,this.authService=t,this.router=i,this.route=s,this.userService=c,this.loginText="Login",this.pswText="Password",this.isTabCached=!1}ngOnInit(){this.authTextButton="\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",this.showCard=_.E.config.useUserCard,console.log(this.showCard)}onAuth(n){const t={login:this.login,psw:this.psw,cardNumber:this.cardNumber};this.authService.checkUser(t)?(this.messageService.add({severity:"success",summary:this.login,detail:"\u0417\u0430\u0448\u0451\u043b"}),this.router.navigate(["/tickets/ticket-list"]),this.userService.setUser(t),this.userService.setToken("user-private-token"),this.userService.getUserToken()):this.messageService.add({severity:"error",summary:this.login+" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",detail:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"})}vipStatusSelected(){}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(p.ez),e.Y36(v.e),e.Y36(d.F0),e.Y36(d.gz),e.Y36(M.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-authorization"]],decls:15,vars:12,consts:[[1,"col-6","m-auto"],[1,"p-float-label"],["type","text","id","float-input","pInputText","",1,"m-1",3,"ngClass","ngModel","ngModelChange"],["for","float-input"],["type","password","id","float-input","pInputText","",1,"m-1",3,"ngClass","ngModel","ngModelChange"],["class","mb-2",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-success",3,"click"],[1,"mb-2"],["name","groupname",3,"binary","ngModel","onChange","ngModelChange"],["class","mt-2 anime",4,"ngIf"],[1,"mt-2","anime"],["type","text","pInputText","",1,"m-1",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div")(2,"span",1)(3,"input",2),e.NdJ("ngModelChange",function(s){return t.login=s}),e.qZA(),e.TgZ(4,"label",3),e._uU(5),e.qZA()()(),e.TgZ(6,"div")(7,"span",1)(8,"input",4),e.NdJ("ngModelChange",function(s){return t.psw=s}),e.qZA(),e.TgZ(9,"label",3),e._uU(10),e.qZA()()(),e.YNc(11,I,5,3,"div",5),e.qZA(),e.TgZ(12,"div",6)(13,"button",7),e.NdJ("click",function(s){return t.onAuth(s)}),e._uU(14),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("ngClass",e.VKq(8,k,!t.login))("ngModel",t.login),e.xp6(2),e.Oqu(t.loginText),e.xp6(3),e.Q6J("ngClass",e.VKq(10,k,!t.psw))("ngModel",t.psw),e.xp6(2),e.Oqu(t.pswText),e.xp6(1),e.Q6J("ngIf",t.showCard),e.xp6(3),e.Oqu(t.authTextButton))},dependencies:[l.mk,l.O5,g.o,r.Fj,r.JJ,r.On,m]}),o})();function q(o,u){if(1&o){const n=e.EpF();e.TgZ(0,"div")(1,"span",1)(2,"input",5),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.cardNumber=i)}),e.qZA(),e.TgZ(3,"label",3),e._uU(4,"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b"),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.cardNumber)}}function E(o,u){1&o&&(e.TgZ(0,"p"),e._uU(1,"\u041a\u0430\u0440\u0442\u0430 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430"),e.qZA())}const C=function(o){return{"input-error":o}};let F=(()=>{class o{constructor(n,t){this.messageService=n,this.authService=t,this.loginText="Login",this.pswText="Password"}ngOnInit(){this.showCardNumber=_.E.config.useUserCard,console.log(this.showCardNumber)}ngOnDestroy(){console.log("Destroyed")}registration(n){if(this.psw!==this.pswRepeat)return this.messageService.add({severity:"error",summary:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442",detail:""}),!1;const t={psw:this.psw,cardNumber:this.cardNumber,login:this.login,email:this.email};if(this.authService.isUserExists(t))this.messageService.add({severity:"warn",summary:this.login+" \u0443\u0436\u0435 \u0435\u0441\u0442\u044c",detail:""});else{if(this.authService.setUser(t),console.log(this.saveUserInStore),this.saveUserInStore){const s=JSON.stringify(t);window.localStorage.setItem("user_"+t?.login,s)}const i=JSON.stringify(t);window.localStorage.setItem("user_"+t?.login,i),this.messageService.add({severity:"success",summary:this.login+" \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d",detail:""})}}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(p.ez),e.Y36(v.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registration"]],decls:32,vars:19,consts:[[1,"col-6","m-auto"],[1,"p-float-label"],["type","text","id","float-input","pInputText","",1,"m-1",3,"ngClass","ngModel","ngModelChange"],["for","float-input"],["type","password","id","float-input","pInputText","",1,"m-1",3,"ngClass","ngModel","ngModelChange"],["type","text","id","float-input","pInputText","",1,"m-1",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],[1,"mx-2"],[1,"px-2"],["name","groupname","value","val1",3,"ngModel","ngModelChange"],[2,"margin","10px"],[1,"d-flex","justify-content-center"],["type","button",1,"btn","btn-success",3,"disabled","click"],["noSelected",""]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div")(2,"span",1)(3,"input",2),e.NdJ("ngModelChange",function(s){return t.login=s}),e.qZA(),e.TgZ(4,"label",3),e._uU(5),e.qZA()()(),e.TgZ(6,"div")(7,"span",1)(8,"input",4),e.NdJ("ngModelChange",function(s){return t.psw=s}),e.qZA(),e.TgZ(9,"label",3),e._uU(10),e.qZA()()(),e.TgZ(11,"div")(12,"span",1)(13,"input",4),e.NdJ("ngModelChange",function(s){return t.pswRepeat=s}),e.qZA(),e.TgZ(14,"label",3),e._uU(15,"Confirm Password"),e.qZA()()(),e.TgZ(16,"div")(17,"span",1)(18,"input",5),e.NdJ("ngModelChange",function(s){return t.email=s}),e.qZA(),e.TgZ(19,"label",3),e._uU(20,"\u041f\u043e\u0447\u0442\u0430"),e.qZA()()(),e.YNc(21,q,5,1,"div",6),e.qZA(),e.TgZ(22,"div",7)(23,"p",8)(24,"p-checkbox",9),e.NdJ("ngModelChange",function(s){return t.saveUserInStore=s}),e.qZA(),e.TgZ(25,"span",10),e._uU(26,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435"),e.qZA()()(),e.TgZ(27,"div",11)(28,"button",12),e.NdJ("click",function(s){return t.registration(s)}),e._uU(29," \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f "),e.qZA()(),e.YNc(30,E,2,0,"ng-template",null,13,e.W1O)),2&n){const i=e.MAs(31);e.xp6(3),e.Q6J("ngClass",e.VKq(13,C,!t.login))("ngModel",t.login),e.xp6(2),e.Oqu(t.loginText),e.xp6(3),e.Q6J("ngClass",e.VKq(15,C,!t.psw))("ngModel",t.psw),e.xp6(2),e.Oqu(t.pswText),e.xp6(3),e.Q6J("ngClass",e.VKq(17,C,!t.pswRepeat))("ngModel",t.pswRepeat),e.xp6(5),e.Q6J("ngModel",t.email),e.xp6(3),e.Q6J("ngIf",t.showCardNumber)("ngIfElse",i),e.xp6(3),e.Q6J("ngModel",t.saveUserInStore),e.xp6(4),e.Q6J("disabled",!t.login||!t.psw||!t.pswRepeat)}},dependencies:[l.mk,l.O5,g.o,r.Fj,r.JJ,r.On,m]}),o})();function V(o,u){1&o&&e._UZ(0,"app-authorization")}function O(o,u){1&o&&e._UZ(0,"app-registration")}const Q=[{path:"",component:(()=>{class o{constructor(){this.isTabCached=!1}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-auth"]],decls:7,vars:2,consts:[["header","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",3,"cache"],["pTemplate","content"],["header","\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",3,"cache"],["position","top-left"]],template:function(n,t){1&n&&(e.TgZ(0,"div")(1,"p-tabView")(2,"p-tabPanel",0),e.YNc(3,V,1,0,"ng-template",1),e.qZA(),e.TgZ(4,"p-tabPanel",2),e.YNc(5,O,1,0,"ng-template",1),e.qZA()()(),e._UZ(6,"p-toast",3)),2&n&&(e.xp6(2),e.Q6J("cache",t.isTabCached),e.xp6(2),e.Q6J("cache",t.isTabCached))},dependencies:[h.xf,h.x4,p.jx,b.FN,U,F]}),o})()}];let z=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),o})(),R=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[p.ez],imports:[l.ez,z,h.LU,g.j,r.u5,S,b.EV]}),o})()}}]);